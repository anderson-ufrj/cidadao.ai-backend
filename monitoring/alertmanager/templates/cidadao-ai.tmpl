{{ define "cidadao.ai.title" }}
[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .CommonLabels.alertname }}
{{ end }}

{{ define "cidadao.ai.text" }}
{{ range .Alerts }}
*Alert:* {{ .Labels.alertname }}
*Severity:* {{ .Labels.severity }}
*Service:* {{ .Labels.service }}
*Instance:* {{ .Labels.instance }}
*Description:* {{ .Annotations.description }}
*Started:* {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}
{{ if .Annotations.runbook_url }}*Runbook:* <{{ .Annotations.runbook_url }}|View Runbook>{{ end }}
{{ end }}
{{ end }}

{{ define "cidadao.ai.html" }}
<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; }
        .alert-box { 
            border: 2px solid #ddd; 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px;
        }
        .critical { border-color: #f44336; background-color: #ffebee; }
        .warning { border-color: #ff9800; background-color: #fff3e0; }
        .info { border-color: #2196f3; background-color: #e3f2fd; }
        .resolved { border-color: #4caf50; background-color: #e8f5e9; }
        h2 { margin-top: 0; }
        .label { font-weight: bold; }
        .metadata { color: #666; font-size: 0.9em; }
    </style>
</head>
<body>
    <h1>Cidadão.AI Alert Notification</h1>
    
    {{ range .Alerts }}
    <div class="alert-box {{ .Labels.severity }}">
        <h2>{{ .Labels.alertname }}</h2>
        
        <p><span class="label">Status:</span> {{ .Status }}</p>
        <p><span class="label">Severity:</span> {{ .Labels.severity | toUpper }}</p>
        <p><span class="label">Service:</span> {{ .Labels.service }}</p>
        <p><span class="label">Instance:</span> {{ .Labels.instance }}</p>
        
        <p><span class="label">Description:</span><br>
        {{ .Annotations.description }}</p>
        
        <div class="metadata">
            <p><span class="label">Started:</span> {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}</p>
            {{ if .EndsAt }}
            <p><span class="label">Ended:</span> {{ .EndsAt.Format "2006-01-02 15:04:05 MST" }}</p>
            {{ end }}
            
            {{ if .Annotations.runbook_url }}
            <p><span class="label">Runbook:</span> <a href="{{ .Annotations.runbook_url }}">View Documentation</a></p>
            {{ end }}
        </div>
        
        <details>
            <summary>All Labels</summary>
            <ul>
            {{ range $key, $value := .Labels }}
                <li><strong>{{ $key }}:</strong> {{ $value }}</li>
            {{ end }}
            </ul>
        </details>
    </div>
    {{ end }}
    
    <hr>
    <p style="color: #666; font-size: 0.8em;">
        This alert was generated by the Cidadão.AI monitoring system. 
        For more information, visit the <a href="https://grafana.cidadao.ai">Grafana Dashboard</a>.
    </p>
</body>
</html>
{{ end }}